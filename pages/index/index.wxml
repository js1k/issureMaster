<view class="index-page">
    <loading hidden="{{hiddenLoading}}">{{loadingText}}</loading>
    <view class='nav-bar flx-ce-ce'>保保大师挑战赛</view>
    <view class='home-user'>
        <view class='home-user-header'>
            <image src="{{insureUserVO.avatarUrl?insureUserVO.avatarUrl:defaultHeader}}" class='header-image' bindtap='handleCheck' data-mark="goHome"></image>
        </view>
        <view class='home-user-info'>
            <text class='user-name' class='nickName'>{{insureUserVO.nickName}}</text>
            <view class='user-info flx-ce-ce' wx:if="{{insureUserVO.userLevel<4}}">
                <image src="{{insureUserVO.userLevel===1?darenIcon:insureUserVO.userLevel===2?gaoshouIcon:dashiIcon}}" class='user-level'></image>
                <image src="../../asset/challengeHome/star_light.png" class='home-star'></image>
                <image src="../../asset/challengeHome/star_light.png" class='home-star' wx:if="{{insureUserVO.starNum>=2}}"></image>
                <image src="../../asset/challengeHome/star_light.png" class='home-star' wx:if="{{insureUserVO.starNum===3}}"></image>
                <image src="../../asset/challengeHome/star_black.png" class='home-star' wx:if="{{insureUserVO.starNum<insureUserVO.userLevel}}"></image>
            </view>
            <view class='user-info flx-ce-ce' wx:if="{{insureUserVO.userLevel===4}}">
                <image src="{{zongshiIcon}}" class='user-level'></image>
                <image src="../../asset/index/zongshiStar@2x.png" class='zongshi-star'></image>
                <text style="color:#fff;font-size:12px">x{{insureUserVO.starNum}}</text>
            </view>
        </view>
    </view>
    <view class='home-section'>
        <view>
            <image src="../../asset/index/logo@2x.png" class='home-logo'></image>
        </view>
        <text class='home-time'>—— {{seasonCheckVO.seasonTitle||'活动未开始'}} {{seasonCheckVO.seasonDate}} ——</text>
        <text class='home-theme'>保险你做主 权益我知道</text>
        <view class='relative' wx:if="{{seasonCheckVO.seasonNo===1||!seasonCheckVO.seasonNo}}">
            <image src="../../asset/index/cloud_left.png" class='season1-cloud-left cloud-left'></image>
            <image src="../../asset/index/cloud_right.png" class='season1-cloud-right cloud-right'></image>
            <image src="http://dt.minshenglife.com/upload/img/20190628/1561691285392.png" class='home-main-pic'></image>
        </view>
        <view class='relative' wx:if="{{seasonCheckVO.seasonNo===2}}">
            <image src="../../asset/index/season2_cloud.png" class='season2-cloud cloud-right'></image>
            <image src="../../asset/index/insurance_policy.png" class='insurance-policy'></image>
            <image src="http://dt.minshenglife.com/upload/img/20190628/1561691322047.png" class='home-main-pic season-pic'></image>
        </view>
        <view class='relative' wx:if="{{seasonCheckVO.seasonNo===3}}">
            <image src="../../asset/index/season3_cloud_left.png" class='season3-cloud-left cloud-left'></image>
            <image src="../../asset/index/season3_cloud_right.png" class='season3-cloud-right cloud-right'></image>
            <image src="http://dt.minshenglife.com/upload/img/20190628/1561691340542.png" class='home-main-pic'></image>
        </view>
        <view class='relative' wx:if="{{seasonCheckVO.seasonNo===4}}">
            <image src="../../asset/index/season4_cloud_left.png" class='season4-cloud-left cloud-left'></image>
            <image src="../../asset/index/season4_cloud_right.png" class='season4-cloud-right cloud-right'></image>
            <image src="http://dt.minshenglife.com/upload/img/20190628/1561691356684.png" class='home-main-pic'></image>
        </view>

        <view class='begin-answer'>
            <image src="../../asset/index/begainAnswer.png" class='begin-btn' bindtap='handleCheck' data-mark="challenge"></image>
        </view>
        <view class='btm-img'>
            <view class='arrow-box'>
                <image src='../../asset/index/home_arrow.png' class='home-arrow' bindtap="openRules"></image>
            </view>
            <image src='../../asset/index/season_tips.png' class='season-stragety' bindtap="openRules"></image>
        </view>
        <!-- <view class='arrow-box'>
            <image src='../../asset/index/home_arrow.png' class='home-arrow' bindtap="openRules"></image>
        </view>
        <image src='../../asset/index/season_tips.png' class='season-stragety' bindtap="openRules"></image> -->
    </view>
    <image src="http://dt.minshenglife.com/upload/img/20190627/1561639338754.png" class='home-btm-bg'></image>
    <view class='loop-content'>
        <view class='relative'>
            <image src="../../asset/index/baobao.png" class='bao-bao'></image>
        </view>
    </view>
    <view class='loop-box'>
        <view class='loop-inner'>
            <text class='loop-text loop-before' wx:if="{{loopBefore}}">{{loopBefore}}</text>
            <text class='loop-text loop-after' wx:if="{{loopAfter}}">{{loopAfter}}</text>
        </view>
    </view>
    <view class='menu-content'>
        <view class='menu-icon' bindtap='handleCheck' data-mark="goRank">
            <view class="icon-content">
                <image src="../../asset/index/rank_icon.png" class='menu-img'></image>
            </view>
            <text class='icon-font'>排行榜</text>
        </view>
        <view class='menu-icon' bindtap='handleCheck' data-mark="treasureBox">
            <view class="icon-content">
                <image src="../../asset/index/task_icon.png" class='menu-img'></image>
                <view class='task-num' wx:if="{{chestNum!==7}}">{{chestNum+''}}/7</view>
            </view>
            <text class='icon-font'>任务宝箱</text>
        </view>
        <view class='menu-icon' bindtap='handleCheck' data-mark="knapsack">
            <view class="icon-content">
                <image src="../../asset/index/bag_icon.png" class='menu-img'></image>
                <view class='task-num' wx:if="{{packageFlag===1}}">NEW</view>
            </view>
            <text class='icon-font'>背包</text>
        </view>
        <view class='menu-icon' bindtap='handleCheck' data-mark="redPackets">
            <view class='icon-content'>
                <image src="../../asset/index/money_icon.png" class='menu-img'></image>
                <view class='task-num' wx:if="{{chipFlag===1}}">NEW</view>
            </view>
            <text class='icon-font'>红包碎片</text>
        </view>
    </view>
    <view class='com-mask index-mask' bindtap='closeMask' wx:if="{{showMask}}">
        <!-- 宝箱 -->
        <view class='flx-ce-clm' catchtap='closeMask' wx:if="{{showShare}}" data-model='inner'>
            <view class='knapsack-close-box'>
                <image src='../../asset/mask_close.png' class='knapsack-close'></image>
            </view>
            <view class='open-pic-box'>
                <image src="{{chestGainTipVO.chestType==1?openXueyi:chestGainTipVO.chestType==2?openFenxiang:openZhuti}}" class='open-box-img'></image>
                <image src='../../asset/baoxiang/open_light.png' class='open-light'></image>
            </view>
            <view class='open-txt flx-ce-ce'>
                <image wx:if="{{chestGainTipVO.chestType!=4}}" src="{{chestGainTipVO.shareAvatar}}" class='tiyanshi-img'></image>
                <image wx:if="{{chestGainTipVO.chestType==4}}" src='../../asset/baoxiang/tiyanshi_icon.png' class='tiyanshi-img'></image>
                <view class='lx-ce-no-clm'>
                    <view wx:if="{{chestGainTipVO.chestType==1}}">你的导师 {{chestGainTipVO.shareUserName}}</view>
                    <view wx:if="{{chestGainTipVO.chestType==4}}">你的好友{{chestGainTipVO.shareUserName}}</view>
                    <view wx:if="{{chestGainTipVO.chestType==4}}">保险体验师</view>
                    <view>送你"{{chestGainTipVO.chestType==4?'主题宝箱':chestGainTipVO.chestType==1?'学艺宝箱':'分享宝箱'}}"</view>
                </view>
            </view>
            <view class='flx-ce-ce btn-open' catchtap='handleOpen'>立即开启</view>
        </view>
        <!-- 微信授权 -->
        <view class='authorization-box flx-ce-clm' wx:if="{{!authFlag}}">
            <view class='auth-title'>申请获取以下权限</view>
            <view class='auth-desc'>使用您的昵称、头像等公开信息用于分享、排行使用</view>
            <button open-type="getUserInfo" class='auth-btn' bindgetuserinfo="getUserInfo">授权</button>
        </view>
        <!-- 赛季攻略 -->
        <scroll-view scroll-y="true" class='rules-container flx-ce-no-clm' wx:if="{{showRules}}" catchtap='closeMask'>
            <view class='arrow-wrap'>
                <image src='../../asset/index/home_arrow.png' class='close_arrow' catchtap='closeMask'></image>
            </view>
            <image src="http://dt.minshenglife.com/upload/img/20190702/1562032305943.png" catchtap='closeMask' mode='widthFix' class='home-rules' data-model='inner'></image>
        </scroll-view>
        <!-- 赛季未开始 -->
        <view class='season-end container flx-ce-clm' wx:if="{{preSeason}}" catchtap='closeMask'>
            <view class='knapsack-close-box'>
                <image src='../../asset/mask_close.png' class='knapsack-close' bindtap='closeMask'></image>
            </view>
            <view class='end-wrap flx-ce-no-clm'>
                <view class='end-title'>活动尚未开始</view>
                <view class='end-info'>快去收集特权卡为冲击赛季奖励</view>
                <view class='end-info'>做准备吧</view>
                <view class='follow-season' catchtap='followSeason'>关注赛季信息 ></view>
                <view class='end-btn flx-ce-ce' catchtap='closeMask'>确定</view>
            </view>
        </view>
        <!-- 赛季结算 -->
        <view class='season-end container flx-ce-clm' wx:if="{{seasonCalc}}" catchtap='closeMask'>
            <view class='knapsack-close-box'>
                <image src='../../asset/mask_close.png' class='knapsack-close' bindtap='closeMask'></image>
            </view>
            <view class='end-wrap flx-ce-no-clm'>
                <view class='end-title'>{{seasonCheckVO.seasonTitle}}结算中</view>
                <view class='end-info'>本赛季正在结算成绩，</view>
                <view class='end-info'>敬请期待下一赛季</view>
                <view class='follow-season' catchtap='followSeason'>关注赛季信息 ></view>
                <view class='end-btn flx-ce-ce' catchtap='closeMask'>确定</view>
            </view>
        </view>
        <!-- 赛季结束 -->
        <view class='season-end container flx-ce-clm' wx:if="{{seasonEnd}}" catchtap='closeMask'>
            <view class='knapsack-close-box'>
                <image src='../../asset/mask_close.png' class='knapsack-close' bindtap='closeMask'></image>
            </view>
            <view class='end-wrap flx-ce-no-clm'>
                <view class='end-title'>{{seasonCheckVO.lastSeasonTitle}} 已结束</view>
                <view class='end-info'>上赛季段位在新赛季继承，奖励于</view>
                <view class='end-info'>48小时内发放</view>
                <view class='follow-season' catchtap='followSeason'>关注赛季信息 ></view>
                <view class='end-btn flx-ce-ce' catchtap='closeMask'>开启新赛季</view>
            </view>
        </view>
        <!-- 代理人无法领取宝箱 -->
        <view class='container flx-ce-clm' wx:if="{{showClient}}" catchtap='closeMask' data-model='inner'>
            <view class='knapsack-close-box'>
                <image src='../../asset/mask_close.png' class='knapsack-close' bindtap='closeMask'></image>
            </view>
            <view class='client-tips flx-ce-no-clm'>
                <view class='end-info'>您的身份是代理人,</view>
                <view class='end-info'>无法成为别人的徒弟哟。</view>
                <view class='clent-btn flx-ce-ce' catchtap='closeMask'>知道了</view>
            </view>
        </view>
        <!-- 分享达到领取上限 -->
        <view class='container flx-ce-clm' catchtap='closeMask' wx:if="{{showLimit}}">
            <view class='knapsack-close-box'>
                <image src='../../asset/mask_close.png' class='knapsack-close' bindtap='closeMask'></image>
            </view>
            <view class='limit flx-ce-no-clm'>
                <image src='../../asset/index/up_limit_bg.png' class='limit-pic'></image>
                <view>您今天的分享宝箱领取已达上线</view>
                <button class='limit-btn' bindtap='closeMask'>我知道了</button>
            </view>
        </view>
        <!-- 背包弹窗 -->
        <view class='knapsack-box' wx:if="{{knapsackMask}}">
            <view class='knapsack-close-box'>
                <image src='../../asset/mask_close.png' class='knapsack-close' bindtap='closeMask'></image>
            </view>
            <view class='knapsack-section' catchtap='closeMask' data-model='inner'>
                <view class='section-card'>
                    <view class='section-header flx-ce-ce'>背包</view>
                    <view class='section-card-list'>
                        <view class='card-box' wx:for="{{cardData}}" wx:key="index">
                            <view class="card-pic flx-ce-ce {{cardIndex==index&&item.num>0?'cur-box-border':''}}">
                                <image wx:if="{{item.name}}" src="{{item.num===0?item.disImg:item.img}}" mode='aspectFit' bindtap='showCard' class='card-bg' data-index="{{index}}"></image>
                                <text class='card-num' wx:if="{{item.name}}">{{item.num}}</text>
                            </view>
                            <view class='card-name flx-ce-ce'>{{item.name}}</view>
                        </view>
                    </view>
                </view>
                <view class='knapsack-pillar'>
                    <view class='pillar'></view>
                    <view class='pillar'></view>
                </view>
                <view class='show-box flx-ce-str'>
                    <view class='card-pic card-pic-chosed flx-ce-ce'>
                        <image mode='aspectFit' src='{{showInfo.showImg}}' class='card-bg'></image>
                    </view>
                    <view class='show-txt'>
                        <view class='show-name'>{{showInfo.showName}}</view>
                        <view class='show-desc'>{{showInfo.showDesc}}</view>
                    </view>
                    <view class='open-btn-box' wx:if="{{showCardBtn&&showInfo.curNum>0}}">
                        <image src='../../asset/index/open_treasureBox.png' class='open-btn' bindtap='handleOpenBox'></image>
                    </view>
                </view>
            </view>
        </view>
        <!-- 拜师 -->
        <view class='container flx-ce-clm' catchtap='closeMask' data-model='inner' wx:if="{{showTeacher}}">
            <view class='knapsack-close-box' >
                <image src='../../asset/mask_close.png' class='knapsack-close' bindtap='closeMask'></image>
            </view>
            <view class='baishi-wrap'>
                <view class='teacher-info'>
                    <image src='../../asset/index/baishi_box_bg.png' class='baishi_bg'></image>
                    <view class='header'>
                        <image src="{{seasonCheckVO.agentInfoVO.avatarUrl?seasonCheckVO.agentInfoVO.avatarUrl:'../../asset/index/default_header.png'}}" class='baishi-img'></image>
                    </view>
                    <view class='teacher-detail'>
                        <view class='teacher-name'>{{shareInfoVO.agentInfoVO.agentName}}</view>
                        <view class='teacher-num'>编号:{{shareInfoVO.agentInfoVO.agentCode}}</view>
                        <view>{{shareInfoVO.agentInfoVO.company+' '+shareInfoVO.agentInfoVO.managecom}} </view>
                    </view>
                </view>
                <view class='teacher-contain flx-ce-no-clm'>
                    <view class='teacher-title'>拜TA为师</view>
                    <view>每天导师都会为你送出</view>
                    <view>“学艺宝箱”</view>
                    <button class='baishi-btn' bindtap='handleTeacher'>确认拜师</button>
                    <button class='spe-btn' bindtap='handleSelfReliance'>自立门户</button>
                    <text class='teacher-tips'>- 民生保险 -</text>
                </view>
            </view>
        </view>
        <!-- 领取卡片 -->
        <view class='open-box-layer flx-ce-no-clm' wx:if="{{openBox}}" catchtap='closeMask' data-model='inner'>
            <view class='knapsack-close-box'>
                <image src='../../asset/mask_close.png' class='knapsack-close' bindtap='closeMask'></image>
            </view>
            <view class='open-box-container flx-ce-no-clm'>
                <image src="{{openImg}}" class='open-bg'></image>
                <view class='open-title'>{{openTitle}}</view>
                <view class='xueyi-gift flx-ce-bet' wx:if="{{saveCardParam.chestType==1}}">
                    <view class='flx-ce-no-clm' bindtap='handleChoseCard' data-card="helpCard">
                        <view class='xueyi-card-name'>帮帮卡</view>
                        <image src="{{bangbangImg}}" class='open-chose-pic'></image>
                        <view class='xueyi-chose-icon' wx:if="{{saveCardParam.helpCard==0}}"></view>
                        <image src='../../asset/index/chose_icon.png' class='xueyi-chose-icon chosed-icon' wx:if="{{saveCardParam.helpCard==1}}"></image>
                    </view>
                    <view class='flx-ce-no-clm' bindtap='handleChoseCard' data-card="removeCard">
                        <view class='xueyi-card-name'>排除卡</view>
                        <image src="{{paichuImg}}" class='open-chose-pic'></image>
                        <view class='xueyi-chose-icon' wx:if="{{saveCardParam.removeCard==0}}"></view>
                        <image src='../../asset/index/chose_icon.png' class='xueyi-chose-icon chosed-icon' wx:if="{{saveCardParam.removeCard==1}}"></image>
                    </view>
                    <view class='flx-ce-no-clm' bindtap='handleChoseCard' data-card="energyCard">
                        <view class='xueyi-card-name'>能量卡</view>
                        <image src="{{nengliangImg}}" class='open-chose-pic'></image>
                        <view class='xueyi-chose-icon' wx:if="{{saveCardParam.energyCard==0}}"></view>
                        <image src='../../asset/index/chose_icon.png' class='xueyi-chose-icon chosed-icon' wx:if="{{saveCardParam.energyCard==1}}"></image>
                    </view>
                </view>
                <view class='xueyi-gift flx-ce-bet' wx:if="{{saveCardParam.chestType==2}}">
                    <view class='flx-ce-no-clm'>
                        <view class='xueyi-card-name'>{{randomName}}</view>
                        <image src="{{randomImg}}" class='open-chose-pic'></image>
                    </view>
                </view>
                <view class='xueyi-gift flx-ce-bet' wx:if="{{saveCardParam.chestType==3}}">
                    <view class='flx-ce-no-clm'>
                        <view class='xueyi-card-name'>帮帮卡</view>
                        <image src="{{bangbangImg}}" class='open-chose-pic'></image>
                    </view>
                    <view class='flx-ce-no-clm'>
                        <view class='xueyi-card-name'>排除卡</view>
                        <image src="{{paichuImg}}" class='open-chose-pic'></image>
                    </view>
                    <view class='flx-ce-no-clm'>
                        <view class='xueyi-card-name'>能量卡</view>
                        <image src="{{nengliangImg}}" class='open-chose-pic'></image>
                    </view>
                </view>
                <view class='xueyi-gift flx-ce-bet' wx:if="{{saveCardParam.chestType==4}}">
                    <view class='flx-ce-no-clm'>
                        <view class='xueyi-card-name'>能量卡</view>
                        <image src="{{nengliangImg}}" class='open-chose-pic'></image>
                    </view>
                </view>
            </view>
            <image src='../../asset/index/put_in_bag.png' class='put-in-bag' bindtap='saveCard'></image>
        </view>
    </view>
</view>